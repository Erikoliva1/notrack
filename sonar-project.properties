# SonarQube Project Configuration
# WebRTC Calling Application

# Project identification
sonar.projectKey=calling-app
sonar.projectName=WebRTC Calling Application
sonar.projectVersion=2.2.6

# Source directories
sonar.sources=app/client/src,app/server/src
sonar.tests=app/client/src/__tests__,app/client/src/components/__tests__,app/client/src/hooks/__tests__,app/server/tests,tests

# Exclude generated and third-party code
sonar.exclusions=**/node_modules/**,\
  **/dist/**,\
  **/build/**,\
  **/coverage/**,\
  **/*.test.ts,\
  **/*.test.tsx,\
  **/*.spec.ts,\
  **/*.spec.tsx,\
  **/test/**,\
  **/tests/**,\
  **/__tests__/**,\
  **/cert/**,\
  **/*.d.ts,\
  **/vite-env.d.ts,\
  **/window.d.ts

# Test coverage exclusions
sonar.coverage.exclusions=**/node_modules/**,\
  **/coverage/**,\
  **/*.test.ts,\
  **/*.test.tsx,\
  **/*.spec.ts,\
  **/*.spec.tsx,\
  **/test/**,\
  **/tests/**,\
  **/__tests__/**

# Language-specific settings
sonar.javascript.lcov.reportPaths=app/client/coverage/lcov.info,app/server/coverage/lcov.info
sonar.typescript.lcov.reportPaths=app/client/coverage/lcov.info,app/server/coverage/lcov.info

# Source encoding
sonar.sourceEncoding=UTF-8

# Analysis scope - exclude auto-generated files
sonar.cpd.exclusions=**/coverage/**,\
  **/node_modules/**,\
  **/dist/**,\
  **/build/**

# Security hotspot rules configuration
# Mark load test Math.random() as safe (not used for cryptography)
sonar.issue.ignore.multicriteria=e1

# Rule: Using pseudorandom number generators in load tests is acceptable
sonar.issue.ignore.multicriteria.e1.ruleKey=typescript:S2245
sonar.issue.ignore.multicriteria.e1.resourceKey=**/load-test*.js

# Code duplication settings
sonar.cpd.minimumTokens=100

# File size limits
sonar.filesize.limit=5000

# Ignore known issues
# Ignore HTTP localhost URLs in development config
sonar.issue.ignore.multicriteria=e1,e2

sonar.issue.ignore.multicriteria.e2.ruleKey=typescript:S5332
sonar.issue.ignore.multicriteria.e2.resourceKey=**/env.ts
